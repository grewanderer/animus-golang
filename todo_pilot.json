{
  "version": "1.0.0",
  "product": "Animus DataPilot – Enterprise Pilot",
  "source_files": {
    "instructions": "CODEX_INSTRUCTIONS.md",
    "roadmap": "roadmap.pilot.json"
  },
  "status_enum": ["pending", "in_progress", "done", "blocked"],
  "absolute_rules": [
    "No TODOs",
    "No stub implementations",
    "No fake data unless explicitly required for demo runner",
    "Every service must compile, run, and be testable",
    "Every API must be documented",
    "UI must render real data from backend"
  ],
  "definition_of_done": {
    "verification_commands_required": ["make test", "make lint", "make migrate-up"],
    "manual_checks_required": [
      "migrations apply cleanly",
      "API is reachable and secured",
      "errors are handled, logged, and audited"
    ]
  },
  "architecture_principles": [
    "UI = control plane (single source of truth)",
    "SDK + CI = execution plane",
    "All data and metadata are immutable",
    "No outbound network calls required",
    "On-prem first, cloud optional"
  ],
  "mandatory_makefile_targets": [
    "make bootstrap",
    "make dev",
    "make test",
    "make lint",
    "make migrate-up",
    "make migrate-down",
    "make helm-lint",
    "make e2e"
  ],
  "services_to_implement": [
    "gateway",
    "dataset-registry",
    "quality",
    "experiments",
    "lineage",
    "audit",
    "ui"
  ],
  "what_not_to_implement": [
    "AutoML",
    "Annotation pipelines",
    "Kafka / Spark / Databricks",
    "Multi-tenant SaaS billing",
    "External SaaS dependencies"
  ],
  "execution_order": {
    "follow_roadmap_file": "roadmap.pilot.json",
    "phase_gate": {
      "requires_all_tasks_done": true,
      "requires_definition_of_done": true
    },
    "report_after_each_phase": [
      "List of files created or changed",
      "Verification commands executed",
      "Confirmation of DoD compliance"
    ]
  },
  "phases": [
    {
      "id": "P0",
      "name": "Foundation",
      "status": "done",
      "tasks": [
        {
          "id": "P0-T1",
          "title": "Create monorepo structure",
          "depends_on": [],
          "status": "done",
          "deliverables": [
            "Root-level module/workspace layout for Go services, Python SDK, and UI",
            "Service directories: gateway, dataset-registry, quality, experiments, lineage, audit",
            "Shared libraries and internal packages organized for testability"
          ]
        },
        {
          "id": "P0-T2",
          "title": "Add ADR: pilot scope and architecture",
          "depends_on": ["P0-T1"],
          "status": "done",
          "deliverables": [
            "Architecture Decision Record covering scope, on-prem constraints, immutability model",
            "Documented boundaries for in-scope and out-of-scope features"
          ]
        },
        {
          "id": "P0-T3",
          "title": "Makefile with standard commands",
          "depends_on": ["P0-T1"],
          "status": "done",
          "deliverables": [
            "Makefile implementing all mandatory targets",
            "Targets wired to build/test/lint/migrations/e2e for CI parity"
          ]
        },
        {
          "id": "P0-T4",
          "title": "CI-ready lint and test setup",
          "depends_on": ["P0-T3"],
          "status": "done",
          "deliverables": [
            "Deterministic linting and unit tests across Go/Python/TypeScript components",
            "CI configuration that runs make lint and make test"
          ]
        }
      ],
      "phase_report": {
        "files_created_or_changed": [
          "go.mod",
          "go.sum",
          "Makefile",
          "CODEX_INSTRUCTIONS.md",
          "docs/adr/0001-pilot-scope-and-architecture.md",
          ".github/workflows/ci.yml",
          "internal/platform/env",
          "internal/platform/httpserver",
          "internal/platform/requestid",
          "sdk/python",
          "frontend_landing",
          "api/openapi",
          "api/README.md"
        ],
        "verification_commands_executed": ["make bootstrap", "make lint", "make test", "make migrate-up", "make helm-lint"],
        "dod_compliant": true
      }
    },
    {
      "id": "P1",
      "name": "Infrastructure",
      "status": "done",
      "tasks": [
        {
          "id": "P1-T1",
          "title": "docker-compose for local dev",
          "depends_on": ["P0-T1"],
          "status": "done",
          "deliverables": [
            "Local dev docker-compose with Postgres and MinIO",
            "Service containers runnable without outbound network access"
          ]
        },
        {
          "id": "P1-T2",
          "title": "Postgres schema and migrations",
          "depends_on": ["P1-T1"],
          "status": "done",
          "deliverables": [
            "Versioned migrations for core domain tables",
            "Migration tooling wired to make migrate-up and make migrate-down"
          ]
        },
        {
          "id": "P1-T3",
          "title": "MinIO integration baseline",
          "depends_on": ["P1-T1"],
          "status": "done",
          "deliverables": [
            "MinIO client integration and configuration",
            "Bucket layout and access policies for datasets/artifacts"
          ]
        }
      ],
      "phase_report": {
        "files_created_or_changed": [
          "docker-compose.yml",
          "Dockerfile",
          ".dockerignore",
          "scripts/migrate.sh",
          "scripts/dev.sh",
          "migrations/000001_audit_events.up.sql",
          "migrations/000001_audit_events.down.sql",
          "migrations/000002_core_domain.up.sql",
          "internal/platform/postgres",
          "internal/platform/objectstore"
        ],
        "verification_commands_executed": ["make bootstrap", "make lint", "make test", "make migrate-up", "make helm-lint"],
        "dod_compliant": true
      }
    },
    {
      "id": "P2",
      "name": "Identity & Gateway",
      "status": "done",
      "tasks": [
        {
          "id": "P2-T1",
          "title": "OIDC authentication support",
          "depends_on": ["P1-T2"],
          "status": "done",
          "deliverables": [
            "OIDC provider configuration support (on-prem compatible)",
            "Login and token acquisition flow used by UI and API clients"
          ]
        },
        {
          "id": "P2-T2",
          "title": "JWT validation middleware",
          "depends_on": ["P2-T1"],
          "status": "done",
          "deliverables": [
            "Gateway middleware that validates JWTs and propagates identity claims",
            "Unauthorized/forbidden responses audited and logged"
          ]
        },
        {
          "id": "P2-T3",
          "title": "RBAC roles enforcement",
          "depends_on": ["P2-T2"],
          "status": "done",
          "deliverables": [
            "Role-based authorization enforced at gateway and service boundaries",
            "Least-privilege roles documented for pilot operations"
          ]
        }
      ],
      "phase_report": {
        "files_created_or_changed": [
          "internal/platform/auth",
          "internal/platform/auditlog",
          "internal/platform/httpserver/httpserver.go",
          "gateway/main.go",
          "dataset-registry/main.go",
          "quality/main.go",
          "experiments/main.go",
          "lineage/main.go",
          "audit/main.go",
          "docker-compose.yml",
          "scripts/dev.sh",
          "api/openapi/gateway.yaml",
          "docs/auth.md",
          "roadmap.pilot.json",
          "go.mod",
          "go.sum"
        ],
        "verification_commands_executed": ["make bootstrap", "make lint", "make test", "make migrate-up", "make helm-lint"],
        "dod_compliant": true
      }
    },
    {
      "id": "P3",
      "name": "Dataset Registry",
      "status": "done",
      "tasks": [
        {
          "id": "P3-T1",
          "title": "Dataset registry service (Go)",
          "depends_on": ["P2-T3"],
          "status": "done",
          "deliverables": [
            "Go service implementing dataset registration APIs",
            "API documentation and request/response validation"
          ]
        },
        {
          "id": "P3-T2",
          "title": "Immutable dataset versions",
          "depends_on": ["P3-T1"],
          "status": "done",
          "deliverables": [
            "Dataset versioning model enforcing immutability",
            "Audit events for dataset/version create operations"
          ]
        },
        {
          "id": "P3-T3",
          "title": "Dataset storage in MinIO",
          "depends_on": ["P3-T2"],
          "status": "done",
          "deliverables": [
            "Content-addressed or versioned dataset objects stored in MinIO",
            "Signed access or controlled proxy access without external dependencies"
          ]
        }
      ],
      "phase_report": {
        "files_created_or_changed": [
          "dataset-registry/api.go",
          "dataset-registry/api_test.go",
          "dataset-registry/integrity.go",
          "dataset-registry/main.go",
          "api/openapi/dataset-registry.yaml",
          "internal/platform/auditlog/auditlog.go"
        ],
        "verification_commands_executed": ["make lint", "make test", "make migrate-up"],
        "dod_compliant": true
      }
    },
    {
      "id": "P4",
      "name": "Quality Gates",
      "status": "done",
      "tasks": [
        {
          "id": "P4-T1",
          "title": "Quality rules specification",
          "depends_on": ["P3-T2"],
          "status": "done",
          "deliverables": [
            "Declarative quality rule specification format",
            "Rules stored immutably and referenced by dataset versions"
          ]
        },
        {
          "id": "P4-T2",
          "title": "Quality validation service",
          "depends_on": ["P4-T1"],
          "status": "done",
          "deliverables": [
            "Service that evaluates quality rules against datasets",
            "Result artifacts persisted and auditable"
          ]
        },
        {
          "id": "P4-T3",
          "title": "PASS/FAIL enforcement",
          "depends_on": ["P4-T2"],
          "status": "done",
          "deliverables": [
            "Enforcement preventing downstream execution on FAIL",
            "Audit trail capturing enforcement decisions"
          ]
        }
      ],
      "phase_report": {
        "files_created_or_changed": [
          "migrations/000003_quality_gates.up.sql",
          "migrations/000003_quality_gates.down.sql",
          "quality/api.go",
          "quality/evaluator.go",
          "quality/evaluator_test.go",
          "quality/integrity.go",
          "quality/main.go",
          "quality/spec.go",
          "quality/spec_test.go",
          "dataset-registry/api.go",
          "docker-compose.yml",
          "api/openapi/quality.yaml",
          "api/openapi/dataset-registry.yaml",
          "docs/quality.md"
        ],
        "verification_commands_executed": ["make lint", "make test", "make migrate-up"],
        "dod_compliant": true
      }
    },
    {
      "id": "P5",
      "name": "Experiments & Integrations",
      "status": "done",
      "tasks": [
        {
          "id": "P5-T1",
          "title": "Experiment registry service",
          "depends_on": ["P3-T2"],
          "status": "done",
          "deliverables": [
            "Service for creating and querying experiments and runs",
            "Immutable experiment metadata model with audit logging"
          ]
        },
        {
          "id": "P5-T2",
          "title": "Python SDK for experiments",
          "depends_on": ["P5-T1"],
          "status": "done",
          "deliverables": [
            "Python SDK for registering experiment runs and metrics",
            "SDK designed for CI execution (no outbound calls)"
          ]
        },
        {
          "id": "P5-T3",
          "title": "Git metadata binding",
          "depends_on": ["P5-T1"],
          "status": "done",
          "deliverables": [
            "Binding experiments/runs to Git commit and repository metadata",
            "Verification that metadata is captured deterministically"
          ]
        },
        {
          "id": "P5-T4",
          "title": "CI webhook for experiment metadata",
          "depends_on": ["P5-T3"],
          "status": "done",
          "deliverables": [
            "Webhook or CI integration to attach build context to runs",
            "Signed/validated payloads and audit trail"
          ]
        }
      ],
      "phase_report": {
        "files_created_or_changed": [
          "experiments/main.go",
          "experiments/api.go",
          "experiments/ci_webhook.go",
          "experiments/ci_webhook_test.go",
          "experiments/integrity.go",
          "migrations/000004_experiment_run_contexts.up.sql",
          "migrations/000004_experiment_run_contexts.down.sql",
          "scripts/migrate.sh",
          "scripts/dev.sh",
          "docker-compose.yml",
          "api/openapi/experiments.yaml",
          "docs/experiments.md",
          "sdk/python/README.md",
          "sdk/python/src/animus_sdk/__init__.py",
          "sdk/python/src/animus_sdk/errors.py",
          "sdk/python/src/animus_sdk/http_client.py",
          "sdk/python/src/animus_sdk/git.py",
          "sdk/python/src/animus_sdk/experiments.py",
          "sdk/python/tests/test_git_metadata.py",
          "sdk/python/tests/test_ci_signature.py"
        ],
        "verification_commands_executed": ["make lint", "make test", "make migrate-up"],
        "dod_compliant": true
      }
    },
    {
      "id": "P6",
      "name": "Lineage & Audit",
      "status": "done",
      "tasks": [
        {
          "id": "P6-T1",
          "title": "Lineage graph model",
          "depends_on": ["P5-T1"],
          "status": "done",
          "deliverables": [
            "Lineage entity and edge model suitable for querying and visualization",
            "Immutable lineage events persisted with auditability"
          ]
        },
        {
          "id": "P6-T2",
          "title": "Dataset → Experiment → Git edges",
          "depends_on": ["P6-T1"],
          "status": "done",
          "deliverables": [
            "Edges linking dataset versions to experiment runs and Git metadata",
            "APIs to query lineage subgraphs by dataset, run, or commit"
          ]
        },
        {
          "id": "P6-T3",
          "title": "Audit events for all actions",
          "depends_on": ["P6-T2"],
          "status": "done",
          "deliverables": [
            "Central audit event model and persistence",
            "Consistent audit logging for all write operations across services"
          ]
        }
      ],
      "phase_report": {
        "files_created_or_changed": [
          "internal/platform/lineageevent/lineageevent.go",
          "internal/platform/lineageevent/lineageevent_test.go",
          "dataset-registry/api.go",
          "experiments/api.go",
          "lineage/main.go",
          "lineage/api.go",
          "audit/main.go",
          "audit/api.go",
          "api/openapi/lineage.yaml",
          "api/openapi/audit.yaml",
          "docs/lineage.md",
          "docs/audit.md"
        ],
        "verification_commands_executed": ["make lint", "make test", "make migrate-up"],
        "dod_compliant": true
      }
    },
    {
      "id": "P7",
      "name": "UI (Control Plane)",
      "status": "done",
      "tasks": [
        {
          "id": "P7-T1",
          "title": "UI shell (Next.js + Tailwind)",
          "depends_on": ["P2-T3"],
          "status": "done",
          "deliverables": [
            "UI app shell with authenticated layout and navigation",
            "Uses gateway APIs as single source of truth"
          ]
        },
        {
          "id": "P7-T2",
          "title": "Dataset & version views",
          "depends_on": ["P3-T2"],
          "status": "done",
          "deliverables": [
            "Dataset list/detail pages rendering real backend data",
            "Dataset version browsing with immutable version semantics"
          ]
        },
        {
          "id": "P7-T3",
          "title": "Experiment views",
          "depends_on": ["P5-T1"],
          "status": "done",
          "deliverables": [
            "Experiment list/detail pages rendering real backend data",
            "Run metadata and Git binding visible in UI"
          ]
        },
        {
          "id": "P7-T4",
          "title": "Lineage visualization",
          "depends_on": ["P6-T2"],
          "status": "done",
          "deliverables": [
            "Interactive lineage graph visualization backed by lineage APIs",
            "Drill-down navigation from datasets to runs to commits"
          ]
        },
        {
          "id": "P7-T5",
          "title": "Audit log UI",
          "depends_on": ["P6-T3"],
          "status": "done",
          "deliverables": [
            "Audit log view with filtering and pagination",
            "User/action/time correlation for investigations"
          ]
        }
      ],
      "phase_report": {
        "files_created_or_changed": [
          "frontend_landing/lib/animus-types.ts",
          "frontend_landing/lib/animus-gateway.ts",
          "frontend_landing/app/app/layout.tsx",
          "frontend_landing/app/app/_components/data-pilot-shell.tsx",
          "frontend_landing/components/ui/app-shell.tsx",
          "frontend_landing/app/app/logout/route.ts",
          "frontend_landing/app/app/dashboard/page.tsx",
          "frontend_landing/app/app/datasets/page.tsx",
          "frontend_landing/app/app/datasets/[dataset_id]/page.tsx",
          "frontend_landing/app/app/datasets/versions/[version_id]/page.tsx",
          "frontend_landing/app/app/datasets/versions/[version_id]/download/route.ts",
          "frontend_landing/app/app/quality/rules/page.tsx",
          "frontend_landing/app/app/quality/rules/[rule_id]/page.tsx",
          "frontend_landing/app/app/quality/evaluations/[evaluation_id]/page.tsx",
          "frontend_landing/app/app/experiments/page.tsx",
          "frontend_landing/app/app/experiments/[experiment_id]/page.tsx",
          "frontend_landing/app/app/experiments/runs/[run_id]/page.tsx",
          "frontend_landing/app/app/lineage/lineage-graph.tsx",
          "frontend_landing/app/app/lineage/page.tsx",
          "frontend_landing/app/app/audit/page.tsx",
          "frontend_landing/app/app/audit/events/[event_id]/page.tsx"
        ],
        "verification_commands_executed": ["make lint", "make test", "make migrate-up"],
        "dod_compliant": true
      }
    },
    {
      "id": "P8",
      "name": "Packaging & Demo",
      "status": "done",
      "tasks": [
        {
          "id": "P8-T1",
          "title": "Helm chart for pilot",
          "depends_on": ["P7-T5"],
          "status": "done",
          "deliverables": [
            "Helm chart packaging all services and required infrastructure",
            "helm lint integrated via make helm-lint"
          ]
        },
        {
          "id": "P8-T2",
          "title": "Air-gapped install bundle",
          "depends_on": ["P8-T1"],
          "status": "done",
          "deliverables": [
            "Offline install artifacts and documentation",
            "No external network dependencies required at install/runtime"
          ]
        },
        {
          "id": "P8-T3",
          "title": "Deterministic demo scenario",
          "depends_on": ["P8-T2"],
          "status": "done",
          "deliverables": [
            "Reproducible end-to-end scenario demonstrating dataset→quality→experiment→lineage→audit",
            "Demo runner uses explicit required demo data only"
          ]
        }
      ],
      "phase_report": {
        "files_created_or_changed": [
          "deploy/helm/animus-datapilot/values.yaml",
          "deploy/helm/animus-datapilot/migrations/000001_audit_events.up.sql",
          "deploy/helm/animus-datapilot/migrations/000002_core_domain.up.sql",
          "deploy/helm/animus-datapilot/migrations/000003_quality_gates.up.sql",
          "deploy/helm/animus-datapilot/migrations/000004_experiment_run_contexts.up.sql",
          "deploy/helm/animus-datapilot/templates/_helpers.tpl",
          "deploy/helm/animus-datapilot/templates/deployments.yaml",
          "deploy/helm/animus-datapilot/templates/services.yaml",
          "deploy/helm/animus-datapilot/templates/secrets.yaml",
          "deploy/helm/animus-datapilot/templates/postgres.yaml",
          "deploy/helm/animus-datapilot/templates/minio.yaml",
          "deploy/helm/animus-datapilot/templates/minio-init.yaml",
          "deploy/helm/animus-datapilot/templates/migrations.yaml",
          "deploy/helm/animus-datapilot/templates/ui.yaml",
          "deploy/helm/animus-datapilot/templates/ingress.yaml",
          "frontend_landing/app/healthz/route.ts",
          "frontend_landing/app/readyz/route.ts",
          "scripts/airgap-bundle.sh",
          "docs/airgap.md",
          "demo/data/demo.csv",
          "demo/README.md",
          "cmd/demo/main.go",
          "docs/demo.md",
          "docs/deploy.md",
          "e2e/health_test.go"
        ],
        "verification_commands_executed": ["make lint", "make test", "make migrate-up", "make helm-lint", "make e2e"],
        "dod_compliant": true
      }
    }
  ]
}
